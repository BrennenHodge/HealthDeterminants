var diameter=1360,padding=180,tree=d3.layout.tree().size([360,diameter/2-120]).separation(function(t,a){return(t.parent==a.parent?1:2)/t.depth}),diagonal=d3.svg.diagonal.radial().projection(function(t){return[t.y,t.x/180*Math.PI]}),svg=d3.select("#svg").append("svg").attr("width",diameter+2*padding).attr("height",diameter+2*padding).append("g").attr("transform","translate("+(diameter/2+padding)+","+(diameter/2+padding)+")");d3.json("health-determinants.json",function(t,a){if(t)throw t;var e=tree.nodes(a),n=tree.links(e),r=svg.selectAll(".link").data(n).enter().append("path").attr("class","link").attr("d",diagonal),d=svg.selectAll(".node").data(e).enter().append("g").attr("class","node").attr("transform",function(t){return"rotate("+(t.x-90)+")translate("+t.y+")"});d.append("circle").attr("r",4.5),d.append("text").attr("class","nodeText").attr("dy",".31em").attr("text-anchor",function(t){return t.x<180?"start":"end"}).attr("transform",function(t){return t.x<180?"translate(8)":"rotate(180)translate(-8)"}).text(function(t){return t.name})});